# part 1.StackOverflow
[hacksysteam site]: https://rootkits.xyz/blog/2017/08/kernel-stack-overflow/

## 1. Analysis
제공 된 HEVD drive의 소스코드 중 StackOverflow.c 코드를 보면 vulnerable code 와 secure code가 나뉘어 있다.

\`#ifdef SECURE
        // Secure Note: This is secure because the developer is passing a size
        // equal to size of KernelBuffer to RtlCopyMemory()/memcpy(). Hence,
        // there will be no overflow
        RtlCopyMemory((PVOID)KernelBuffer, UserBuffer, sizeof(KernelBuffer));\`
  
\`#else
        DbgPrint("[+] Triggering Stack Overflow\n");
        // Vulnerability Note: This is a vanilla Stack based Overflow vulnerability
        // because the developer is passing the user supplied size directly to
        // RtlCopyMemory()/memcpy() without validating if the size is greater or
        // equal to the size of KernelBuffer
        
        RtlCopyMemory((PVOID)KernelBuffer, UserBuffer, Size);\`
